semmcci: Monte Carlo Confidence Intervals in Structural Equation
Modeling
================
Ivan Jacob Agaloos Pesigan
2022-09-07

<!-- README.md is generated from README.Rmd. Please edit that file -->
<!-- badges: start -->

[![R-CMD-check](https://github.com/jeksterslab/semmcci/workflows/R-CMD-check/badge.svg)](https://github.com/jeksterslab/semmcci/actions)
[![codecov](https://codecov.io/gh/jeksterslab/semmcci/branch/main/graph/badge.svg)](https://codecov.io/gh/jeksterslab/semmcci)
<!-- badges: end -->

## Description

`semmcci` calculates Monte Carlo confidence intervals for free and
defined parameters in the structural equation modeling package `lavaan`.
The output of `lavaan` is passed as the first argument to the `MC()`
function to generate Monte Carlo confidence intervals. Monte Carlo
confidence intervals for the standardized estimates can also be
generated by passing the output of the `MC()` function to the `MCStd()`
function.

## Installation

You can install the released version of `semmcci` from
[GitHub](https://github.com/jeksterslab/semmcci) with:

``` r
install.packages("remotes")
remotes::install_github("jeksterslab/semmcci")
```

## Example

This is an example of a simple mediation model where `X` is the
predictor, `M` is the mediator, and `Y` is the dependent variable.

``` r
library(semmcci)
library(lavaan)
```

### Data

``` r
n <- 1000
X <- rnorm(n = n)
M <- 0.50 * X + rnorm(n = n)
Y <- 0.25 * X + 0.50 * M + rnorm(n = n)
data <- data.frame(X, M, Y)
```

### Model Specification

The indirect effect is defined by the product of the slopes of paths `X`
to `M` labeled as `a` and `M` to `Y` labeled as `b`. In this example, we
are interested in the confidence intervals of `ab` defined as the
product of `a` and `b` using the `:=` operator in the `lavaan` model
syntax.

``` r
model <- "
  Y ~ cp * X + b * M
  M ~ a * X
  indirect := a * b
  direct := cp
  total := cp + (a * b)
"
```

### Model Fitting

We can now fit the model using the `sem()` function from `lavaan`.

``` r
fit <- sem(data = data, model = model)
```

### Monte Carlo Confidence Intervals

The `fit` `lavaan` object can then be passed to the `MC()` function from
`semmcci` to generate Monte Carlo confidence intervals.

``` r
MC(fit, R = 20000L, alpha = c(0.001, 0.01, 0.05))
#> Monte Carlo Confidence Intervals
#>             est     se     R  0.05%   0.5%   2.5%  97.5%  99.5% 99.95%
#> cp       0.2495 0.0369 20000 0.1282 0.1564 0.1780 0.3219 0.3450 0.3742
#> b        0.5296 0.0333 20000 0.4258 0.4461 0.4646 0.5955 0.6155 0.6360
#> a        0.5031 0.0313 20000 0.3962 0.4208 0.4418 0.5644 0.5827 0.6055
#> Y~~Y     1.0732 0.0479 20000 0.9180 0.9507 0.9800 1.1679 1.1960 1.2268
#> M~~M     0.9659 0.0428 20000 0.8264 0.8559 0.8828 1.0505 1.0766 1.0976
#> X~~X     1.0022     NA    NA     NA     NA     NA     NA     NA     NA
#> indirect 0.2664 0.0237 20000 0.1957 0.2098 0.2217 0.3145 0.3306 0.3502
#> direct   0.2495 0.0369 20000 0.1282 0.1564 0.1780 0.3219 0.3450 0.3742
#> total    0.5159 0.0366 20000 0.3927 0.4240 0.4446 0.5881 0.6117 0.6367
```

### Standardized Monte Carlo Confidence Intervals

Standardized Monte Carlo Confidence intervals can be generated by
passing the result of the `MC()` function to `MCStd()`.

> **Note:** We recommend setting `fixed.x = FALSE` when generating
> standardized estimates and confidence intervals to model the
> variance/s of the predictor/s.

``` r
fit <- sem(data = data, model = model, fixed.x = FALSE)
unstd <- MC(fit, R = 20000L, alpha = c(0.001, 0.01, 0.05))
MCStd(unstd)
#> Standardized Monte Carlo Confidence Intervals
#>             est     se     R  0.05%   0.5%   2.5%  97.5%  99.5% 99.95%
#> cp       0.1968 0.0286 20000 0.1037 0.1238 0.1415 0.2528 0.2709 0.2909
#> b        0.4608 0.0266 20000 0.3740 0.3895 0.4072 0.5111 0.5273 0.5476
#> a        0.4561 0.0250 20000 0.3744 0.3916 0.4054 0.5044 0.5183 0.5349
#> Y~~Y     0.6662 0.0243 20000 0.5855 0.6018 0.6169 0.7120 0.7265 0.7427
#> M~~M     0.7920 0.0228 20000 0.7139 0.7314 0.7456 0.8356 0.8467 0.8598
#> X~~X     1.0000 0.0000 20000 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
#> indirect 0.2101 0.0170 20000 0.1578 0.1675 0.1773 0.2436 0.2548 0.2695
#> direct   0.1968 0.0286 20000 0.1037 0.1238 0.1415 0.2528 0.2709 0.2909
#> total    0.4070 0.0263 20000 0.3204 0.3387 0.3547 0.4583 0.4747 0.4932
```

## More Information

See [GitHub Pages](https://jeksterslab.github.io/semmcci/index.html) for
package documentation.
