---
title: "Introduction to semmcci"
author: "Ivan Jacob Agaloos Pesigan"
date: "`r Sys.Date()`"
description: >
  Learn how to get started with the basics of semmcci.
output:
  rmarkdown::html_vignette:
    toc: true
vignette: >
  %\VignetteIndexEntry{Introduction to semmcci}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

<!-- badges: start -->
[![R build status](https://github.com/jeksterslab/semmcci/workflows/R-CMD-check/badge.svg?branch=master)](https://github.com/jeksterslab/semmcci/actions?workflow=R-CMD-check)
[![Travis build status](https://travis-ci.com/jeksterslab/semmcci.svg?branch=master)](https://travis-ci.com/jeksterslab/semmcci)
[![codecov](https://codecov.io/github/jeksterslab/semmcci/branch/master/graphs/badge.svg)](https://codecov.io/github/jeksterslab/semmcci) 
<!-- badges: end -->

## Monte Carlo Confidence Intervals

`semmcci` calculates Monte Carlo confidence intervals.
The output of the structural equation modeling package `lavaan`
is passed as the first argument
to the `mc` function in `semmcci`
to generate Monte Carlo confidence intervals.

## Installation

You can install the released version of `semmcci` from [GitHub](https://github.com/jeksterslab/semmcci) with:

```r
library(devtools)
install_github("jeksterslab/semmcci")
```

## Example

### Data

```{r}
n <- 1000
x <- rnorm(n = n)
m <- 0.50 * x + rnorm(n = n)
y <- 0.25 * x + 0.50 * m + rnorm(n = n)
data <- data.frame(x, m, y)
```

### Model Specification in lavaan

The first step is to define a `lavaan` model
using the `lavaan` model syntax.
In this example, we look at a simple mediation model
where `x` is the predictor, `m` is the mediator, and `y` is the dependent variable.
The indirect effect is defined by the product of the slopes
of paths `x` to `m` labeled as `a` and `m` to `y` labeled as `b`.
We are interested in the confidence intervals of `ab`
defined as the product of `a` and `b` using the `:=` operator.

```{r}
model <- "
  y ~ x + b * m
  m ~ a * x
  ab := a * b
"
```

### Model Fitting in lavaan

We can now fit the model and save the `lavaan` object to `fit`.

```{r}
library(lavaan)
fit <- sem(
  model = model,
  data = data
)
```

### Monte Carlo Method Confidence Intervals

We can now construct confidence intervals around `ab` by passing `fit` as an argument to the `mc` function.

```{r}
library(semmcci)
out <- mc(fit)
print(out)
```

## More Information

See [GitHub Pages](https://jeksterslab.github.io/semmcci/index.html)
for package documentation.
